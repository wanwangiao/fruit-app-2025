(()=>{var e={};e.id=606,e.ids=[606],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4234:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>l,routeModule:()=>p,tree:()=>c}),r(6737),r(9457),r(2029),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),d=r(5231),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);r.d(t,o);let c=["",{children:["admin",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6737)),"C:\\Users\\黃士嘉\\fruit-delivery-app\\src\\app\\admin\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9457)),"C:\\Users\\黃士嘉\\fruit-delivery-app\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\黃士嘉\\fruit-delivery-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],l=["C:\\Users\\黃士嘉\\fruit-delivery-app\\src\\app\\admin\\orders\\page.tsx"],m="/admin/orders/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/orders/page",pathname:"/admin/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6868:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3229:()=>{},8635:(e,t,r)=>{Promise.resolve().then(r.bind(r,648))},5303:()=>{},648:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(326),a=r(7577),i=r(7687),n=r(1193);function d(){let[e,t]=(0,a.useState)((0,n.AU)()),[r,d]=(0,a.useState)(""),[o,c]=(0,a.useState)("所有狀態"),[l,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),u=["所有狀態","待處理","已確認","配送中","已完成","已取消"],h=(0,a.useMemo)(()=>e.filter(e=>{let t=e.customerName.toLowerCase().includes(r.toLowerCase())||e.deliveryAddress.toLowerCase().includes(r.toLowerCase())||e.customerPhone.includes(r),s="所有狀態"===o||e.status===o;return t&&s}),[e,r,o]),g=e=>{p({...e}),m(!0)},y=(e,r)=>{(0,n.E7)(e,r),t((0,n.AU)()),alert(`訂單 ${e} 狀態已更新為 ${r}`)},f=(e,t)=>{p(r=>{if(!r||!r.items)return r;let s=r.items.map((r,s)=>s===e?{...r,unitPrice:t}:r),a=s.reduce((e,t)=>e+t.unitPrice*t.quantity,0);return{...r,items:s,totalAmount:a}})},v=(0,a.useMemo)(()=>{let e=h.map(e=>e.deliveryAddress).join("|");return e?`https://via.placeholder.com/600x300?text=訂單配送地圖
${encodeURIComponent(e)}`:""},[h]);return(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"訂單管理"}),v&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"訂單配送地圖概覽"}),s.jsx("img",{src:v,alt:"訂單配送地圖",className:"w-full h-auto rounded-lg"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"此為模擬地圖，實際應用中將整合地圖服務顯示精確位置。"})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6 flex space-x-4",children:[s.jsx("input",{type:"text",placeholder:"搜尋客戶姓名、電話或地址...",className:"flex-1 border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900",value:r,onChange:e=>d(e.target.value)}),s.jsx("select",{className:"border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900",value:o,onChange:e=>c(e.target.value),children:u.map(e=>s.jsx("option",{value:e,children:e},e))})]}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"訂單號"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"客戶"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"地址"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"總金額"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"訂單日期"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),(0,s.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[h.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",e.id]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.customerName}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.deliveryAddress}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["NT$ ",e.totalAmount.toLocaleString()]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"待處理"===e.status?"bg-yellow-100 text-yellow-800":"已確認"===e.status?"bg-blue-100 text-blue-800":"配送中"===e.status?"bg-purple-100 text-purple-800":"已完成"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.orderDate}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx("button",{onClick:()=>g(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"詳情"}),s.jsx("select",{value:e.status,onChange:t=>y(e.id,t.target.value),className:"border border-gray-300 p-1 rounded-md text-gray-900 text-sm",children:u.filter(e=>"所有狀態"!==e).map(e=>s.jsx("option",{value:e,children:e},e))})]})]},e.id)),0===h.length&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"沒有找到符合條件的訂單。"})})]})]})}),x&&(0,s.jsxs)(i.Z,{isOpen:l,onClose:()=>m(!1),title:`訂單 #${x.id} 詳情`,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["客戶姓名: ",s.jsx("span",{className:"font-medium text-gray-900",children:x.customerName})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["客戶電話: ",s.jsx("span",{className:"font-medium text-gray-900",children:x.customerPhone})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["配送地址: ",s.jsx("span",{className:"font-medium text-gray-900",children:x.deliveryAddress})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["訂單日期: ",s.jsx("span",{className:"font-medium text-gray-900",children:x.orderDate})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["訂單狀態: ",s.jsx("span",{className:"font-medium text-gray-900",children:x.status})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"商品明細"}),(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"商品"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"數量"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"單價"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"小計"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.items.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.name,e.options&&e.options.length>0&&s.jsx("div",{className:"text-xs text-gray-500",children:e.options.map((e,t)=>(0,s.jsxs)("span",{children:[e.groupName,": ",e.value," "]},t))})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.quantity}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.isPriceByWeight?s.jsx("input",{type:"number",value:0===e.unitPrice?"":e.unitPrice,onChange:e=>f(t,Number(e.target.value)),className:"w-24 border border-gray-300 p-1 rounded-md text-gray-900",placeholder:"輸入單價"}):`NT$ ${e.unitPrice}`}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["NT$ ",(e.unitPrice*e.quantity).toLocaleString()]})]},t))})]}),(0,s.jsxs)("div",{className:"text-right text-lg font-bold text-gray-800 mt-4",children:["訂單總金額: NT$ ",x.totalAmount.toLocaleString()]})]}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsx("button",{onClick:()=>{x&&((0,n.Cs)(x),t((0,n.AU)()),m(!1),alert(`訂單 #${x.id} 已更新！`))},className:"bg-green-600 text-white py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"儲存訂單"})})]})]})}},7687:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({isOpen:e,onClose:t,children:r,title:a=""}){return e?s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-11/12 md:w-2/3 lg:w-1/2 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:a}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl leading-none",children:"\xd7"})]}),s.jsx("div",{className:"p-6",children:r})]})}):null}r(7577)},1193:(e,t,r)=>{"use strict";let s;r.d(t,{AU:()=>x,CP:()=>i,Cs:()=>u,E7:()=>p,IP:()=>h,Ir:()=>m,Xp:()=>o,gK:()=>c,i8:()=>n,nM:()=>l,uu:()=>d}),s={categories:[{id:1,name:"蔬菜類",sortOrder:1},{id:2,name:"水果類",sortOrder:2},{id:3,name:"肉品",sortOrder:3},{id:4,name:"海鮮",sortOrder:4},{id:5,name:"丸類",sortOrder:5},{id:6,name:"火鍋料",sortOrder:6}],products:[{id:1,name:"高麗菜",category:"蔬菜類",price:50,isPriceByWeight:!0,imageUrl:"https://via.placeholder.com/80?text=高麗菜",description:"新鮮高麗菜",stock:100,options:[]},{id:2,name:"蘋果",category:"水果類",price:80,isPriceByWeight:!1,imageUrl:"https://via.placeholder.com/80?text=蘋果",description:"香甜蘋果",stock:50,options:[]},{id:3,name:"豬五花",category:"肉品",price:120,isPriceByWeight:!1,imageUrl:"https://via.placeholder.com/80?text=豬五花",description:"美味豬五花",stock:30,options:[]},{id:4,name:"鮭魚片",category:"海鮮",price:250,isPriceByWeight:!1,imageUrl:"https://via.placeholder.com/80?text=鮭魚片",description:"新鮮鮭魚片",stock:20,options:[]},{id:5,name:"香菇貢丸",category:"丸類",price:90,isPriceByWeight:!1,imageUrl:"https://via.placeholder.com/80?text=貢丸",description:"Q彈香菇貢丸",stock:80,options:[]},{id:6,name:"金針菇",category:"蔬菜類",price:30,isPriceByWeight:!1,imageUrl:"https://via.placeholder.com/80?text=金針菇",description:"火鍋必備金針菇",stock:120,options:[]},{id:7,name:"珍珠奶茶",category:"飲料",price:60,isPriceByWeight:!1,imageUrl:"https://via.placeholder.com/80?text=珍奶",description:"經典珍珠奶茶",stock:999,options:[{groupName:"甜度",type:"single",required:!0,values:["無糖","微糖","半糖","正常糖"]},{groupName:"冰塊",type:"single",required:!0,values:["去冰","微冰","少冰","正常冰"]},{groupName:"加料",type:"multiple",required:!1,values:["珍珠","椰果","布丁"]}]}],inventory:[{id:1,name:"高麗菜",minStock:50,batches:[{quantity:80,unitCost:25,purchaseDate:"2025-08-01"},{quantity:20,unitCost:30,purchaseDate:"2025-08-05"},{quantity:10,unitCost:28,purchaseDate:"2025-08-07"}]},{id:2,name:"蘋果",minStock:30,batches:[{quantity:50,unitCost:60,purchaseDate:"2025-08-02"},{quantity:15,unitCost:62,purchaseDate:"2025-08-06"}]},{id:3,name:"豬五花",minStock:20,batches:[{quantity:30,unitCost:90,purchaseDate:"2025-08-03"}]},{id:4,name:"鮭魚片",minStock:10,batches:[{quantity:15,unitCost:200,purchaseDate:"2025-08-04"}]},{id:5,name:"香菇貢丸",minStock:40,batches:[{quantity:80,unitCost:70,purchaseDate:"2025-08-01"}]},{id:6,name:"金針菇",minStock:60,batches:[{quantity:120,unitCost:20,purchaseDate:"2025-08-02"}]}],orders:[{id:1,customerName:"王小明",customerPhone:"0912345678",deliveryAddress:"台北市信義區市府路1號",totalAmount:350,status:"待處理",orderDate:"2025-08-08 10:30",items:[{productId:1,name:"高麗菜",quantity:1,unitPrice:50,options:[],isPriceByWeight:!1},{productId:2,name:"蘋果",quantity:2,unitPrice:80,options:[],isPriceByWeight:!1},{productId:5,name:"香菇貢丸",quantity:1,unitPrice:90,options:[],isPriceByWeight:!1}]},{id:2,customerName:"陳大華",customerPhone:"0922334455",deliveryAddress:"新北市板橋區縣民大道二段7號",totalAmount:200,status:"已確認",orderDate:"2025-08-08 11:00",items:[{productId:7,name:"青江菜",quantity:3,unitPrice:40,options:[],isPriceByWeight:!1},{productId:8,name:"香蕉",quantity:1,unitPrice:60,options:[],isPriceByWeight:!1}]},{id:3,customerName:"林美玲",customerPhone:"0933445566",deliveryAddress:"桃園市中壢區中正路100號",totalAmount:120,status:"待處理",orderDate:"2025-08-08 12:15",items:[{productId:1,name:"高麗菜",quantity:1,unitPrice:0,options:[],isPriceByWeight:!0},{productId:3,name:"豬五花",quantity:1,unitPrice:120,options:[],isPriceByWeight:!1}]},{id:4,customerName:"張小華",customerPhone:"0987654321",deliveryAddress:"台中市西屯區台灣大道三段",totalAmount:80,status:"待處理",orderDate:"2025-08-09 09:00",items:[{productId:1,name:"高麗菜",quantity:2,unitPrice:0,options:[],isPriceByWeight:!0},{productId:2,name:"蘋果",quantity:1,unitPrice:80,options:[],isPriceByWeight:!1}]}]};let a=()=>{},i=()=>[...s.categories],n=e=>{let t={id:Math.max(...s.categories.map(e=>e.id),0)+1,name:e,sortOrder:s.categories.length+1};return s.categories.push(t),a(),t},d=e=>{s.categories=s.categories.filter(t=>t.id!==e),a()},o=()=>[...s.products],c=e=>{let t=Math.max(...s.products.map(e=>e.id),0)+1,r={...e,id:t};return s.products.push(r),a(),r},l=e=>{s.products=s.products.map(t=>t.id===e.id?e:t),a()},m=e=>{s.products=s.products.filter(t=>t.id!==e),a()},x=()=>[...s.orders],p=(e,t)=>{s.orders=s.orders.map(r=>r.id===e?{...r,status:t}:r),a()},u=e=>{s.orders=s.orders.map(t=>t.id===e.id?e:t),a()},h=()=>[...s.categories].sort((e,t)=>e.sortOrder-t.sortOrder).map(e=>({categoryName:e.name,sortOrder:e.sortOrder,products:s.products.filter(t=>t.category===e.name).map(e=>({id:e.id,name:e.name,price:e.price,imageUrl:e.imageUrl,isPriceByWeight:e.isPriceByWeight}))}))},9457:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(9510);function a({children:e}){return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,s.jsxs)("aside",{className:"w-64 bg-gray-800 text-white flex flex-col",children:[s.jsx("div",{className:"h-16 flex items-center justify-center text-2xl font-bold",children:"後台管理"}),(0,s.jsxs)("nav",{className:"flex-1 px-4 py-8 space-y-2",children:[s.jsx("a",{href:"/admin",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"儀表板"}),s.jsx("a",{href:"/admin/products",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"商品管理"}),s.jsx("a",{href:"/admin/categories",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"分類管理"}),s.jsx("a",{href:"/admin/orders",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"訂單管理"}),s.jsx("a",{href:"/admin/inventory",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"庫存管理"})]})]}),(0,s.jsxs)("main",{className:"flex-1 flex flex-col",children:[s.jsx("header",{className:"h-16 bg-white border-b"}),s.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:e})]})]})}r(1159)},6737:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>d});var s=r(8570);let a=(0,s.createProxy)(String.raw`C:\Users\黃士嘉\fruit-delivery-app\src\app\admin\orders\page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let d=(0,s.createProxy)(String.raw`C:\Users\黃士嘉\fruit-delivery-app\src\app\admin\orders\page.tsx#default`)},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>n});var s=r(9510),a=r(5384),i=r.n(a);r(5023);let n={title:"蔬果外送",description:"新鮮蔬果，快速送到家"};function d({children:e}){return s.jsx("html",{lang:"zh-TW",children:s.jsx("body",{className:i().className,children:e})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[935],()=>r(4234));module.exports=s})();