(()=>{var e={};e.id=180,e.ids=[180],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4164:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d}),s(3492),s(9457),s(2029),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["admin",{children:["inventory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3492)),"C:\\Users\\黃士嘉\\fruit-delivery-app\\src\\app\\admin\\inventory\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"C:\\Users\\黃士嘉\\fruit-delivery-app\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\黃士嘉\\fruit-delivery-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\黃士嘉\\fruit-delivery-app\\src\\app\\admin\\inventory\\page.tsx"],x="/admin/inventory/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/inventory/page",pathname:"/admin/inventory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6868:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},3229:()=>{},4267:(e,t,s)=>{Promise.resolve().then(s.bind(s,4005))},5303:()=>{},4005:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(326),a=s(7577);function n({isOpen:e,onClose:t,title:s,onSubmit:n,fields:i,submitText:l="提交"}){let[c,d]=(0,a.useState)(()=>{let e={};return i.forEach(t=>{e[t.name]=void 0!==t.initialValue?t.initialValue:""}),e});if(!e)return null;let o=e=>{let t=e.target,s=t.name,r="checkbox"===t.type&&t instanceof HTMLInputElement?t.checked:t.value;d(e=>({...e,[s]:r}))};return r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-11/12 md:w-1/3 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:s}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl leading-none",children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(c),t()},className:"p-6 space-y-4",children:[i.map(e=>(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700",children:e.label}),r.jsx("input",{type:e.type,name:e.name,id:e.name,value:c[e.name],onChange:o,placeholder:e.placeholder,disabled:e.disabled,className:"mt-1 block w-full border border-gray-300 p-2 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 text-gray-900",required:"checkbox"!==e.type})]},e.name)),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"取消"}),r.jsx("button",{type:"submit",className:"bg-green-600 text-white py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:l})]})]})]})})}var i=s(7687);let l=[{id:1,name:"高麗菜",minStock:50,batches:[{quantity:80,unitCost:25,purchaseDate:"2025-08-01"},{quantity:20,unitCost:30,purchaseDate:"2025-08-05"},{quantity:10,unitCost:28,purchaseDate:"2025-08-07"}]},{id:2,name:"蘋果",minStock:30,batches:[{quantity:50,unitCost:60,purchaseDate:"2025-08-02"},{quantity:15,unitCost:62,purchaseDate:"2025-08-06"}]},{id:3,name:"豬五花",minStock:20,batches:[{quantity:30,unitCost:90,purchaseDate:"2025-08-03"}]},{id:4,name:"鮭魚片",minStock:10,batches:[{quantity:15,unitCost:200,purchaseDate:"2025-08-04"}]},{id:5,name:"香菇貢丸",minStock:40,batches:[{quantity:80,unitCost:70,purchaseDate:"2025-08-01"}]},{id:6,name:"金針菇",minStock:60,batches:[{quantity:120,unitCost:20,purchaseDate:"2025-08-02"}]}];function c(){let[e,t]=(0,a.useState)(l),[s,c]=(0,a.useState)(""),[d,o]=(0,a.useState)(!1),[x,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[y,b]=(0,a.useState)("all"),f=(0,a.useMemo)(()=>e.map(e=>({...e,currentStock:e.batches.reduce((e,t)=>e+t.quantity,0)})),[e]),j=(0,a.useMemo)(()=>e.reduce((e,t)=>e+t.batches.reduce((e,t)=>e+t.quantity*t.unitCost,0),0),[e]),v=(0,a.useMemo)(()=>f.filter(e=>e.currentStock<=e.minStock),[f]),N=(0,a.useMemo)(()=>f.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())),[f,s]),w=(0,a.useMemo)(()=>{if(!p)return[];let e=new Date,t=new Date;switch(y){case"day":t.setHours(0,0,0,0);break;case"week":t.setDate(e.getDate()-e.getDay()),t.setHours(0,0,0,0);break;case"month":t.setDate(1),t.setHours(0,0,0,0);break;default:return p.batches}return p.batches.filter(s=>{let r=new Date(s.purchaseDate);return r>=t&&r<=e})},[p,y]),k=(0,a.useMemo)(()=>w.reduce((e,t)=>e+t.quantity*t.unitCost,0),[w]);return(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"庫存管理"}),(0,r.jsxs)("div",{className:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-6",role:"alert",children:[r.jsx("p",{className:"font-bold",children:"目前總庫存金額"}),(0,r.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["NT$ ",j.toLocaleString()]})]}),v.length>0&&(0,r.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6",role:"alert",children:[r.jsx("p",{className:"font-bold",children:"低庫存警示！"}),r.jsx("p",{children:"以下商品庫存量低於最低庫存設定："}),r.jsx("ul",{className:"list-disc list-inside",children:v.map(e=>(0,r.jsxs)("li",{children:[e.name," (目前庫存: ",e.currentStock,")"]},e.id))})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:r.jsx("input",{type:"text",placeholder:"搜尋商品名稱...",className:"w-full border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900",value:s,onChange:e=>c(e.target.value)})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"商品名稱"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"目前庫存"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"最低庫存"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),(0,r.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[N.map(e=>(0,r.jsxs)("tr",{className:e.currentStock<=e.minStock?"bg-yellow-50":"",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.currentStock}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.minStock}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:()=>{g(e),o(!0)},className:"text-green-600 hover:text-green-900 mr-4",children:"入庫"}),r.jsx("button",{onClick:()=>{g(e),m(!0)},className:"text-orange-600 hover:text-orange-900 mr-4",children:"出庫"}),r.jsx("button",{onClick:()=>{g(e),h(!0),b("all")},className:"text-blue-600 hover:text-blue-900",children:"歷史"})]})]},e.id)),0===N.length&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"沒有找到符合條件的庫存商品。"})})]})]})}),p&&r.jsx(n,{isOpen:d,onClose:()=>o(!1),title:`為 ${p.name} 入庫`,onSubmit:e=>{let{quantity:s,unitCost:r,totalCost:a,purchaseDate:n}=e,i=Number(s),l=Number(r);if(a&&!r)l=Number(a)/i;else if(r&&!a);else if(!r&&!a){alert("請輸入單品成本或總金額。");return}t(e=>e.map(e=>e.id===p.id?{...e,batches:[...e.batches,{quantity:i,unitCost:l,purchaseDate:n||new Date().toISOString().split("T")[0]}]}:e)),alert(`已為 ${p.name} 入庫 ${i} 個。`)},fields:[{name:"quantity",label:"入庫數量",type:"number",placeholder:"例如: 50"},{name:"unitCost",label:"單品成本",type:"number",placeholder:"例如: 25"},{name:"totalCost",label:"總金額",type:"number",placeholder:"例如: 1250"},{name:"purchaseDate",label:"入庫日期",type:"date",initialValue:new Date().toISOString().split("T")[0]}],submitText:"確認入庫"}),p&&r.jsx(n,{isOpen:x,onClose:()=>m(!1),title:`為 ${p.name} 出庫`,onSubmit:e=>{let{quantity:s}=e,r=Number(s);t(e=>e.map(e=>{if(e.id===p.id){let t=[...e.batches].sort((e,t)=>new Date(e.purchaseDate).getTime()-new Date(t.purchaseDate).getTime()),s=[],a=r;for(let e of t){if(a<=0){s.push(e);continue}e.quantity<=a?a-=e.quantity:(s.push({...e,quantity:e.quantity-a}),a=0)}return a>0&&alert(`出庫數量超過庫存！實際出庫 ${r-a} 個。`),{...e,batches:s.filter(e=>e.quantity>0)}}return e})),alert(`已為 ${p.name} 出庫 ${r} 個。`)},fields:[{name:"quantity",label:"出庫數量",type:"number",placeholder:"例如: 10"}],submitText:"確認出庫"}),p&&(0,r.jsxs)(i.Z,{isOpen:u,onClose:()=>h(!1),title:`${p.name} - 庫存歷史`,children:[(0,r.jsxs)("div",{className:"mb-4 flex justify-center space-x-2",children:[r.jsx("button",{onClick:()=>b("all"),className:`px-4 py-2 rounded-full text-sm font-medium ${"all"===y?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"全部"}),r.jsx("button",{onClick:()=>b("day"),className:`px-4 py-2 rounded-full text-sm font-medium ${"day"===y?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"今天"}),r.jsx("button",{onClick:()=>b("week"),className:`px-4 py-2 rounded-full text-sm font-medium ${"week"===y?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"本週"}),r.jsx("button",{onClick:()=>b("month"),className:`px-4 py-2 rounded-full text-sm font-medium ${"month"===y?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"本月"})]}),(0,r.jsxs)("div",{className:"mb-4 text-right text-lg font-semibold text-gray-800",children:["篩選後總成本: NT$ ",k.toLocaleString()]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"日期"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"類型"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"數量"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"單品成本"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"總價"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.length>0?w.map((e,t)=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.purchaseDate}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:"入庫"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["+",e.quantity]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["NT$ ",e.unitCost]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["NT$ ",(e.quantity*e.unitCost).toLocaleString()]})]},t)):r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"沒有找到符合篩選條件的歷史記錄。"})})})]})}),(0,r.jsxs)("div",{className:"mt-6 p-4 border-t border-gray-200",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"銷售與利潤概覽 (未來功能)"}),r.jsx("p",{className:"text-gray-600",children:"此處將顯示篩選時間範圍內的銷售金額和毛利。"}),r.jsx("p",{className:"text-gray-600",children:"需要整合訂單管理功能後才能提供。"})]})]})]})}},7687:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(326);function a({isOpen:e,onClose:t,children:s,title:a=""}){return e?r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-11/12 md:w-2/3 lg:w-1/2 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:a}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl leading-none",children:"\xd7"})]}),r.jsx("div",{className:"p-6",children:s})]})}):null}s(7577)},3492:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var r=s(8570);let a=(0,r.createProxy)(String.raw`C:\Users\黃士嘉\fruit-delivery-app\src\app\admin\inventory\page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let l=(0,r.createProxy)(String.raw`C:\Users\黃士嘉\fruit-delivery-app\src\app\admin\inventory\page.tsx#default`)},9457:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(9510);function a({children:e}){return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,r.jsxs)("aside",{className:"w-64 bg-gray-800 text-white flex flex-col",children:[r.jsx("div",{className:"h-16 flex items-center justify-center text-2xl font-bold",children:"後台管理"}),(0,r.jsxs)("nav",{className:"flex-1 px-4 py-8 space-y-2",children:[r.jsx("a",{href:"/admin",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"儀表板"}),r.jsx("a",{href:"/admin/products",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"商品管理"}),r.jsx("a",{href:"/admin/categories",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"分類管理"}),r.jsx("a",{href:"/admin/orders",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"訂單管理"}),r.jsx("a",{href:"/admin/inventory",className:"flex items-center px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"庫存管理"})]})]}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col",children:[r.jsx("header",{className:"h-16 bg-white border-b"}),r.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:e})]})]})}s(1159)},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>i});var r=s(9510),a=s(5384),n=s.n(a);s(5023);let i={title:"蔬果外送",description:"新鮮蔬果，快速送到家"};function l({children:e}){return r.jsx("html",{lang:"zh-TW",children:r.jsx("body",{className:n().className,children:e})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[935],()=>s(4164));module.exports=r})();